<Project Sdk="Microsoft.NET.Sdk">
  <Import Project="..\..\Common\Shared.props" />
  <PropertyGroup>
    <TargetFrameworks>netcoreapp3.1</TargetFrameworks>
    <OriginProjectName>CK.Setupable.Engine.Tests</OriginProjectName>
    <OutputType>Exe</OutputType>
  </PropertyGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\CK.Setupable.Engine\CK.Setupable.Engine.csproj" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="NUnit" Version="3.12.0" />
    <PackageReference Include="NUnitLite" Version="3.12.0" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="..\$(OriginProjectName)\**\*.cs" Exclude="..\$(OriginProjectName)\obj\**">
      <Link>Include\%(RecursiveDir)%(Filename)%(Extension)</Link>
      <Visible>true</Visible>
    </Compile>
  </ItemGroup>
  <ItemGroup>
    <OriginRes Include="..\$(OriginProjectName)\Res\TextFile.txt">
      <Name>$(OriginProjectName).Res.TextFile.txt</Name>
    </OriginRes>
    <OriginRes Include="..\$(OriginProjectName)\Another\Namespace\TextFile.txt">
      <Name>$(OriginProjectName).Another.Namespace.TextFile.txt</Name>
    </OriginRes>
    <OriginRes Include="..\$(OriginProjectName)\SubNamespace\**\*.txt">
      <Name>$(OriginProjectName).SubNamespace.%(RecursiveDir)%(Filename)%(Extension)</Name>
    </OriginRes>
  </ItemGroup>
  <Target Name="EmbedOriginResource" BeforeTargets="BeforeBuild">
    <ItemGroup>
      <EmbeddedResource Include="@(OriginRes)">
        <LogicalName>$([System.String]::new('%(OriginRes.Name)').Replace('\','.'))</LogicalName>
      </EmbeddedResource>
    </ItemGroup>
  </Target>
</Project>