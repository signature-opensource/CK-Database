From 6958a78e18d954d93835a0de5bd9342252da29c9 Mon Sep 17 00:00:00 2001
From: Maxime Paquatte <maxime.paquatte@gmail.com>
Date: Mon, 27 Aug 2012 18:08:55 +0200
Subject: [PATCH] Unit test multi requirements

---
 .../Scripts/InstallFromScratch/Test.WithModel.ck            |    4 ++++
 .../Scripts/InstallFromScratch/Test.sStoredProcedureA.sql   |   11 +++++++++++
 .../Scripts/InstallFromScratch/Test.sStoredProcedureB.sql   |   11 +++++++++++
 .../Scripts/InstallFromScratch/Test.sStoredProcedureC.sql   |   11 +++++++++++
 4 files changed, 37 insertions(+)
 create mode 100644 Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.sStoredProcedureA.sql
 create mode 100644 Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.sStoredProcedureB.sql
 create mode 100644 Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.sStoredProcedureC.sql

diff --git a/Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.WithModel.ck b/Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.WithModel.ck
index 50b8a6e..b1d271d 100644
--- a/Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.WithModel.ck
+++ b/Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.WithModel.ck
@@ -17,5 +17,9 @@
           can be created by the Package and/or the Item.
     -->
     <Add FullName="Test.fTest" />
+
+    <Add FullName="Test.sStoredProcedureAe" />
+    <Add FullName="Test.sStoredProcedureB" />
+    <Add FullName="Test.sStoredProcedureC" />
   </Content>
 </SetupPackage>
diff --git a/Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.sStoredProcedureA.sql b/Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.sStoredProcedureA.sql
new file mode 100644
index 0000000..6fdd983
--- /dev/null
+++ b/Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.sStoredProcedureA.sql
@@ -0,0 +1,11 @@
+﻿-- Version = 1.0.0, Package = Test, Requires={Test.sStoredProcedureB, Test.sStoredProcedureC}
+create procedure Test.sStoredProcedureA
+(
+	@P int
+)
+as
+begin
+	--[beginsp]
+	select P = @P
+	--[endsp]
+end
diff --git a/Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.sStoredProcedureB.sql b/Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.sStoredProcedureB.sql
new file mode 100644
index 0000000..894f58a
--- /dev/null
+++ b/Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.sStoredProcedureB.sql
@@ -0,0 +1,11 @@
+﻿-- Version = 1.0.0, Package = Test
+create procedure Test.sStoredProcedureB
+(
+	@P int
+)
+as
+begin
+	--[beginsp]
+	select P = @P
+	--[endsp]
+end
diff --git a/Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.sStoredProcedureC.sql b/Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.sStoredProcedureC.sql
new file mode 100644
index 0000000..64d0d68
--- /dev/null
+++ b/Tests/CK.Setup.SqlServer.Tests/Scripts/InstallFromScratch/Test.sStoredProcedureC.sql
@@ -0,0 +1,11 @@
+﻿-- Version = 1.0.0, Package = Test
+create procedure Test.sStoredProcedureC
+(
+	@P int
+)
+as
+begin
+	--[beginsp]
+	select P = @P
+	--[endsp]
+end
-- 
1.7.10.msysgit.1

